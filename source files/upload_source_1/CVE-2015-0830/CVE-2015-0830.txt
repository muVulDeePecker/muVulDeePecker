diff --git a/dom/canvas/WebGLContextGL.cpp b/dom/canvas/WebGLContextGL.cpp
--- a/dom/canvas/WebGLContextGL.cpp
+++ b/dom/canvas/WebGLContextGL.cpp
@@ -3370,19 +3370,21 @@ WebGLContext::CompileShader(WebGLShader*
 
         if (!lenWithNull) {
             // Error in ShGetInfo.
             shader->SetTranslationFailure(NS_LITERAL_CSTRING("Internal error: failed to get shader info log"));
         } else {
             size_t len = lenWithNull - 1;
 
             nsAutoCString info;
-            info.SetLength(len); // Allocates len+1, for the null-term.
-            ShGetInfoLog(compiler, info.BeginWriting());
-
+            if (len) {
+                // Don't allocate or try to write to zero length string
+                info.SetLength(len); // Allocates len+1, for the null-term.
+                ShGetInfoLog(compiler, info.BeginWriting());
+            }
             shader->SetTranslationFailure(info);
         }
         ShDestruct(compiler);
         shader->SetCompileStatus(false);
         return;
     }
 
     size_t num_attributes = 0;
